import{j as V,e as z,u as M}from"./index-pmkFKrkJ.js";/* empty css                     *//* empty css                  *//* empty css                 */import{t as k,A as C,I as N,aI as A,y as v,r as h,x as T,J as $,P as o,C as u,u as e,G as a,ao as G,$ as J,aF as K,W as L,L as O,aA as W,aB as j}from"./vue-CiNTPoLB.js";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang-Bt20p_At.js";import{W as P,X,C as Y,Y as Z,Z as H,_ as Q,$ as ee,i as oe,a0 as te,a1 as se,r as ae,E as re}from"./element-D6yGaeVA.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vxe-DbfZp5nQ.js";/* empty css                        *//* empty css                     *//* empty css                   */const ne="/v3-admin-vite/assets/logo-text-2-y4GmJqxb.png";function le(){return V({url:"auth/captcha",method:"get"})}function de(r){return V({url:"auth/login",method:"post",data:r})}const ie=k({__name:"Owl",props:{closeEyes:{type:Boolean}},setup(r){const n=r;return(c,d)=>(v(),C("div",{class:N(["owl",{"owl-password":n.closeEyes}])},[...d[0]||(d[0]=[A('<div class="hand-down-left" data-v-9d98ae89></div><div class="hand-down-right" data-v-9d98ae89></div><div class="hand-up-left" data-v-9d98ae89></div><div class="hand-up-right" data-v-9d98ae89></div><div class="close-eyes" data-v-9d98ae89></div>',5)])],2))}}),ue=E(ie,[["__scopeId","data-v-9d98ae89"]]);function ce(){const r=h(!1);return{isFocus:r,handleBlur:()=>{r.value=!1},handleFocus:()=>{r.value=!0}}}const me={class:"login-container"},pe={class:"login-card"},fe={class:"content"},_e=k({__name:"index",setup(r){const n=W(),c=j(),d=z(),b=M(),{isFocus:I,handleBlur:x,handleFocus:w}=ce(),y=K("loginFormRef"),m=h(!1),p=h(""),s=J({username:"admin",password:"12345678",code:""}),R={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]};function F(){y.value?.validate(i=>{if(!i){re.error("表单校验不通过");return}m.value=!0,de(s).then(({data:t})=>{d.setToken(t.token),c.push(n.query.redirect?decodeURIComponent(n.query.redirect):"/")}).catch(()=>{f(),s.password=""}).finally(()=>{m.value=!1})})}function f(){s.code="",p.value="",le().then(i=>{p.value=i.data})}return f(),(i,t)=>{const _=Y,g=X,B=oe,q=ee,S=ae,U=P;return v(),C("div",me,[e(b).showThemeSwitch?(v(),T(D,{key:0,class:"theme-switch"})):$("",!0),o(ue,{"close-eyes":e(I)},null,8,["close-eyes"]),u("div",pe,[t[4]||(t[4]=u("div",{class:"title"},[u("img",{src:ne})],-1)),u("div",fe,[o(U,{ref_key:"loginFormRef",ref:y,model:e(s),rules:R,onKeyup:G(F,["enter"])},{default:a(()=>[o(g,{prop:"username"},{default:a(()=>[o(_,{modelValue:e(s).username,"onUpdate:modelValue":t[0]||(t[0]=l=>e(s).username=l),modelModifiers:{trim:!0},placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":e(Z),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(g,{prop:"password"},{default:a(()=>[o(_,{modelValue:e(s).password,"onUpdate:modelValue":t[1]||(t[1]=l=>e(s).password=l),modelModifiers:{trim:!0},placeholder:"密码",type:"password",tabindex:"2","prefix-icon":e(H),size:"large","show-password":"",onBlur:e(x),onFocus:e(w)},null,8,["modelValue","prefix-icon","onBlur","onFocus"])]),_:1}),o(g,{prop:"code"},{default:a(()=>[o(_,{modelValue:e(s).code,"onUpdate:modelValue":t[2]||(t[2]=l=>e(s).code=l),modelModifiers:{trim:!0},placeholder:"验证码",type:"text",tabindex:"3","prefix-icon":e(Q),maxlength:"7",size:"large",onBlur:e(x),onFocus:e(w)},{append:a(()=>[o(q,{src:e(p),draggable:"false",onClick:f},{placeholder:a(()=>[o(B,null,{default:a(()=>[o(e(se))]),_:1})]),error:a(()=>[o(B,null,{default:a(()=>[o(e(te))]),_:1})]),_:1},8,["src"])]),_:1},8,["modelValue","prefix-icon","onBlur","onFocus"])]),_:1}),o(S,{loading:e(m),type:"primary",size:"large",onClick:L(F,["prevent"])},{default:a(()=>[...t[3]||(t[3]=[O(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])])])])}}}),be=E(_e,[["__scopeId","data-v-18640929"]]);export{be as default};
